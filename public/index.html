<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/superagent/3.8.3/superagent.min.js"></script>
<style>

.breadcrumb-dot .breadcrumb-item+.breadcrumb-item::before {
    content: "â€¢";
    color: #408080;
}
</style>

<body>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb breadcrumb-dot bg-warning">
          <li class="breadcrumb-item" style="font-weight: bolder;">GreatBank</li>
          <li class="breadcrumb-item"><a href="#" onclick="accountCreation()">Create Account</a></li>
          <li class="breadcrumb-item"><a href="#" onclick="logOn()">Login</a></li>
          <li class="breadcrumb-item"><a href="#" onclick="showDeposit()">Deposit</a></li>
          <li class="breadcrumb-item"><a href="#" onclick="showWithdraw()">Withdraw</a></li>
          <li class="breadcrumb-item"><a href="#" onclick="showTransactions()">Transactions</a></li>
          <li class="breadcrumb-item"><a href="#" onclick="showBalance()">Balance</a></li>
          <li class="breadcrumb-item"><a href="#" onclick="showAll()">Show All</a></li>
        </ol>
      </nav>
    <!-- <div id="navigation"></div>        
    <main role="main" class="container" style="margin-top:20px">
        <div id="target"></div>
    </main> -->


</body>

<div id="target" style="padding-left: 3em;">

    <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header">GreatBank Landing Page</div>
        <img class="card-img-top" src="https://m.economictimes.com/thumb/msid-71487585,width-1200,height-900,resizemode-4,imgsize-169788/bank-getty.jpg" alt="Card image">

        <div class="card-body" >
          <h5 class="card-title">Welcome to our bank</h5>
          <p class="card-text">We provide swift and secure world-class banking services</p>
        </div>
    </div>

</div>


<script>


    function accountCreation(){
        var target = document.getElementById('target')

        var card1 = `

        <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header" style="font-weight: bolder;">Create Account</div>
            <div class="card-body" >
            <form>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" aria-describedby="emailHelp" placeholder="Enter name">
                </div>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="text" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
                    <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="text" class="form-control" id="password" placeholder="Enter password">
                </div>
                <button type="submit" class="btn btn-primary" onclick="addUser()">Create Account</button>
                <div id="notif" style="padding-top: 1em;"></div>
            </form>        
        </div>
        `;
        target.innerHTML = card1

    }

    function logOn(){
        var target = document.getElementById('target')
        var card2 = `
        <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header" style="font-weight: bolder;">Login</div>
            <div class="card-body" >
            <form>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="text" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="text" class="form-control" id="password" placeholder="Enter password">
                </div>
                <button type="submit" class="btn btn-primary" onclick="loginActivity()">Login</button>
                <div id="notif" style="padding-top: 1em;"></div>
            </form>        
        </div>
        `;
        target.innerHTML = card2
    }   

    function showDeposit(){
        var target = document.getElementById('target')
        var card3 = `
        <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header">Deposit</div>
            <div class="card-body" >
            <form>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="text" class="form-control" id="email" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label for="amount">Amount</label>
                    <input type="text" class="form-control" id="amount" placeholder="Enter amount">
                </div>
                <button type="submit" class="btn btn-primary" onclick="addAmount()">Deposit</button>
                <div id="notif" style="padding-top: 1em;"></div>
            </form>
            <div id="notif" style="padding-top: 1em;"></div>
        </div>  
        `;
        target.innerHTML = card3
    }   

    function showWithdraw(){
        var target = document.getElementById('target')
        var card4 = `
        <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header">Withdraw</div>
            <div class="card-body" >
            <form>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="text" class="form-control" id="email" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label for="amount">Amount</label>
                    <input type="text" class="form-control" id="amount" placeholder="Enter amount">
                </div>
                <button type="submit" class="btn btn-primary" onclick="withdrawAmount()">Submit</button>
                <div id="notif" style="padding-top: 1em;"></div>
            </form>
            <div id="notif" style="padding-top: 1em;"></div>
        </div>  
        `;
        target.innerHTML = card4
    }   

    function showTransactions(){
        var target = document.getElementById('target')
        var card5 = `
        <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header">Transaction History</div>
            <div class="card-body" >
            <form>
                <div class="form-group">
                    <label for="amount">Email</label>
                    <input type="text" class="form-control" id="email" placeholder="Enter email">
                </div>
                <button type="submit" class="btn btn-primary" onclick="transactionHistory()">Show</button>
                <div id="notif" style="padding-top: 1em;"></div>
            </form>
            <div id="notif"></div>
        </div>  
        `;
        target.innerHTML = card5
    }   

    function showBalance(){
        var target = document.getElementById('target')
        var card6 = `
        <div class="card bg-light mb-3" style="max-width: 18rem;" >
        <div class="card-header">Balance</div>
            <div class="card-body" >
            <form>
                <div class="form-group">
                    <label for="amount">Email</label>
                    <input type="text" class="form-control" id="email" placeholder="Enter email">
                </div>
                <button type="submit" class="btn btn-primary" onclick="accountBalance()">Check</button>
                <div id="notif" style="padding-top: 1em;"></div>
            </form>
            <div id="notif"></div>
        </div>  
        `;
        target.innerHTML = card6
    } 

    function showAll(){
        var target = document.getElementById('target')
        var card7 = `
        <div class="card bg-light mb-3" style="max-width: 38rem;" >
        <div class="card-header">All GreatBank Accounts</div>
            <div class="card-body">
            <button type="submit" class="btn btn-primary" onclick="showAllAccounts()">Show All</button>
        </div>  
        <div id="notif"></div>

        `;
        target.innerHTML = card7
    } 

    function addUser() {
    var status  = document.getElementById('notif');
    var name  = document.getElementById('name').value;
    var email  = document.getElementById('email').value;
    var password  = document.getElementById('password').value;
    var url = '/account/create/' + name + '/' + email + '/' + password;

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
                status.innerHTML = "An error occured, please try again";
            }else{
                console.log(res);
                status.innerHTML = res.text;
            }
        }
        );
    }
    
    function loginActivity() {
    var status  = document.getElementById('notif');
    var email  = document.getElementById('email').value;
    var password  = document.getElementById('password').value;
    var url = '/account/login/' + email + '/' + password;

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
                status.innerHTML = res.text;
            }else{
                console.log(res);
                status.innerHTML = res.text;
            }
        }
        );
    }

    function addAmount() {
    var status  = document.getElementById('notif');
    var email  = document.getElementById('email').value;
    var amount  = document.getElementById('amount').value;
    var url = '/account/deposit/' + email + '/' + amount;

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
                status.innerHTML = "Error Occured or User doesn't exist";
            }else{
                console.log(res);
                status.innerHTML = "Balance Updated!";
            }
        }
        );
    }

    function withdrawAmount() {
    var status  = document.getElementById('notif');
    var email  = document.getElementById('email').value;
    var amount  = document.getElementById('amount').value;
    var url = '/account/withdraw/' + email + '/' + amount;

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
                status.innerHTML = "Error Occured or User doesn't exist";
            }else{
                console.log(res);
                status.innerHTML = "Amount Withdrawn";
            }
        }
        );
    }

    function accountBalance() {
    var status  = document.getElementById('notif');
    var email  = document.getElementById('email').value;
    var url = '/account/get/' + email;

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
                status.innerHTML = "Error Occured or User doesn't exist";
            }else{
                console.log(res);
                status.innerHTML = res.text;
            }
        }
        );
    }

    function transactionHistory() {
    var status  = document.getElementById('notif');
    var email  = document.getElementById('email').value;
    var url = '/account/transactions/' + email;

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
                status.innerHTML = "Error Occured or User doesn't exist";
            }else{
                console.log(res);
                status.innerHTML = res.text;
            }
        }
        );
    }

    function showAllAccounts() {
    var status  = document.getElementById('notif');
    var url = '/account/all';

    superagent
        .get(url)
        .end(function(err, res){
            if (err){
                console.log(err);
            }else{
                console.log(res);
                status.innerHTML = JSON.stringify(res.body);
            }
        }

        );
    }

</script>
<script src='api/api.js'></script>
<!-- <script src='modules/modules.js'></script> -->

</html>